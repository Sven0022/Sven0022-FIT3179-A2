<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environmental Impacts Dashboard</title>
     
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css">
    <link rel="stylesheet" href="style.css">
     
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
    <div class="page"> 
        <div class="bubble-title">
            Environmental Impacts on the World
        </div>
 
        <div class="pure-g">
            <div class="pure-u-1 full-width-container">
                <div id="map"></div>
            </div>
        </div>
        <div class="pure-g">
          <div class="pure-u-1 full-width-container text-container">
              <div class="text-content">
                  <p>
                      The world faces numerous environmental challenges such as air pollution, water scarcity, and deforestation. Monitoring and addressing these issues is crucial to achieving sustainability and ensuring a healthy planet for future generations. This dashboard provides insights into key environmental indicators across the globe, allowing us to understand the impact of human activities on the environment and the steps being taken towards mitigation.
                  </p>
              </div>
          </div>
      </div>
 
        <div class="pure-g">
            <div class="pure-u-1-2 vis-container">
                <div id="line-chart"></div>
            </div>
            <div class="pure-u-1-2 vis-container">
                <div id="scatter-plot"></div>
            </div>
        </div>
        
        <div class="pure-g">
            <div class="pure-u-1 full-width-container">
                <div id="gauge-chart"></div>
            </div>
        </div>

        <!-- Bar and Marimekko charts side by side -->
        <!-- Bar and Marimekko charts side by side -->
<div class="pure-g">
  <div class="pure-u-1-2 vis-container">
      <div id="bar-chart"></div>
  </div>
  <div class="pure-u-1-2 vis-container">
      <div id="marimekko-chart"></div>
      <!-- Add the Play button here -->
      <button id="playButton" class="pure-button pure-button-primary">Play</button>
  </div>
</div>


        <!-- Text block after Bar and Marimekko charts -->
        <div class="pure-g">
          <div class="pure-u-1 full-width-container text-container">
              <div class="text-content">
                  <h2>Understanding the Environmental Data</h2>
                  <p>
                      Visualizing data helps in understanding complex environmental patterns. From bar charts showing death rates to the more complex Marimekko chart, it is important to look beyond raw numbers and examine trends that can influence policy-making and sustainability efforts.
                  </p>
              </div>
          </div>
      </div>

        <!-- Bump chart and Text block side by side -->
        <div class="pure-g"> 
            <div class="pure-u-1-2 description-container">
                                <div class="bottom-half vis-container">
                    <div id="bump-chart"></div>
                </div>
            </div>
 
            <div class="pure-u-1-2 vis-container">
                <div class="text-content">
                    <h2>Exploring Environmental Trends</h2>
                    <p>
                        The bump chart to the left showcases the changing ranks of environmental impact metrics over time. This visualization offers a dynamic look at which countries have made significant improvements and where further interventions are required.
                    </p>
                </div>
            </div>
        </div>
    </div>
 
    <script type="text/javascript">
       
      var specMap = "map.json";
      var specLineChart = "line.json";
      var specScatterPlot = "scatter.json";
      var specBarChart = "bar.json";
      var specMarimekkoChart = "marimekko.json";  
      var specgauge = "gauge.json";
      var specBumpChart = "bump.json";
      var viewMarimekko; 

      var year = 2000; 
      var playing = false; 
      var interval; 

      // Embed the charts
      vegaEmbed('#map', specMap, { "actions": false }).catch(console.error);
      vegaEmbed('#line-chart', specLineChart, { "actions": false }).catch(console.error);
      vegaEmbed('#scatter-plot', specScatterPlot, { "actions": false }).catch(console.error);
      vegaEmbed('#bar-chart', specBarChart, { "actions": false }).catch(console.error);
      vegaEmbed('#gauge-chart', specgauge, { "actions": false }).catch(console.error);
      vegaEmbed('#marimekko-chart', specMarimekkoChart, { "actions": false }).then(function(result) {
        viewMarimekko = result.view;
        viewMarimekko.signal("selectedYear", year).run(); 
      }).catch(console.error);

      // Embed the bump chart in the bottom 
      vegaEmbed('#bump-chart', specBumpChart, { "actions": false }).catch(console.error);

      function playMarimekko() {
        if (playing) {
          clearInterval(interval); 
          playing = false;
        } else {
          interval = setInterval(function() {
            if (year < 2022) {
              year++;
            } else {
              year = 2000; 
            }
            viewMarimekko.signal("selectedYear", year).run();
          }, 1000); 
          playing = true;
        }
      }

      document.getElementById("playButton").addEventListener("click", playMarimekko);
    </script>
</body>
</html>

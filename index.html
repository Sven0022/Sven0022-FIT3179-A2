<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environmental Impacts Dashboard</title>
     
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css">
    <link rel="stylesheet" href="style.css">
     
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
    <div class="page"> 
        <div class="bubble-title">
            Global Environmental and Health Trends
        </div>
 
        <div class="pure-g">
            <div class="pure-u-1 full-width-container">
                <div id="map"></div>
            </div>
        </div>
        <div class="pure-g">
          <div class="pure-u-1 full-width-container text-container">
              <div class="text-content">
                  <p>
                    This world map illustrates the distribution of household air pollution and related deaths. The color gradient represents the pollution values, with darker shades of <span style="color:blue; font-weight:bold;">blue</span> indicating higher pollution levels. Additionally, <span style="color:red; font-weight:bold;">red</span> circles indicate deaths due to air pollution, with the size of the circles corresponding to the number of deaths. Larger circles, such as those seen over <b>India</b> and parts of <b>China</b>, indicate higher mortality rates. Many regions in <b>Africa</b> and <b>South Asia</b> show low pollution and associated deaths, while some areas in <b>North America</b> and <b>Europe</b> exhibit high pollution levels but fewer deaths. Countries in white do not have any details, and countries without circles indicate zero deaths related to household air pollution. This visualization highlights the severe impact of air pollution on health, especially in developing regions.
                  </div>
          </div>
      </div>
 
        <div class="pure-g">
            <div class="pure-u-1-2 vis-container">
                <div id="line-chart"></div>
            </div>
            <div class="pure-u-1-2 vis-container">
                <div id="scatter-plot"></div>
            </div>
        </div>
        <div class="pure-g">
          <div class="pure-u-1 full-width-container text-container">
              <div class="text-content">
                  <p>
                    The visualizations display trends related to sanitation and water assistance over the years. The default country selected is <b>Sudan</b>, and users can change the country using the dropdown menu to explore data for other countries.

                    On the left graph, the trends show a comparison between <span style="color:blue; font-weight:bold;">open defecation</span> and <span style="color:orange; font-weight:bold;">handwashing</span> indicators. 
                    
                    On the right graph, the trends compare the selected country's water and sanitation-related assistance with the global average. The <span style="color:red; font-weight:bold;">red</span> line represents the global average across all countries, and the <span style="color:blue; font-weight:bold;">blue</span> line corresponds to the selected country's data. The graph highlights variations in water and sanitation assistance values, showcasing spikes and declines in specific years.
                                      </p>
              </div>
          </div>
      </div>
        
        <div class="pure-g">
            <div class="pure-u-1 full-width-container">
                <div id="gauge-chart"></div>
            </div>
        </div>

        <!-- Bar and Marimekko charts side by side -->
        <!-- Bar and Marimekko charts side by side -->
<div class="pure-g">
  <div class="pure-u-1-2 vis-container">
      <div id="bar-chart"></div>
  </div>
  <div class="pure-u-1-2 vis-container">
      <div id="marimekko-chart"></div>
      <!-- Add the Play button here -->
      <button id="playButton" class="pure-button pure-button-primary">Play</button>
  </div>
</div>


        <!-- Text block after Bar and Marimekko charts -->
        <div class="pure-g">
          <div class="pure-u-1 full-width-container text-container">
              <div class="text-content">
                  <p>
                    The first chart on the left illustrates the <b>Top 10 Countries by Deaths for Noncommunicable Diseases</b>. The bar heights represent the death count, with the highest number of deaths occurring in the <b>Russian Federation</b>, followed by <b>Indonesia</b> and the <b>United States of America</b>. The remaining countries have progressively fewer deaths.

                    The second chart on the right displays <b>Safe Water Access and Basic Sanitation for Urban and Rural Areas</b> across various countries. Each bar is segmented to show <span style="color:blue; font-weight:bold;"> rural safe drinking water</span>, <span style="color:orange; font-weight:bold;">urban safe drinking water</span> , and population without safe water in <span style="color:red; font-weight:bold;">Urban</span> and <span style="color:rgb(112, 36, 96); font-weight:bold;">rural</span>. It highlights the differences in access to safe water and sanitation between urban and rural populations, where urban areas tend to have better access than rural regions. The slider below the graph allows the user to select a specific year to view trends.
                                      </p>
              </div>
          </div>
      </div>

        <!-- Bump chart and Text block side by side -->
        <div class="pure-g"> 
            <div class="pure-u-1-2 description-container">
                                <div class="bottom-half vis-container">
                    <div id="bump-chart"></div>
                </div>
            </div>
 
            <div class="pure-u-1-2 vis-container">
                <div class="text-content">
                    <p>
                      The hexagonal chart visualizes the <b>Forest Area Indicator</b>  for various countries. The color gradient represents the proportion of forest area relative to the total land area, with darker shades (closer to purple) indicating a higher forest area percentage and lighter shades (closer to yellow) representing a lower forest area percentage.

                      Countries like <b>Australia</b> and <b>Germany</b> show higher forest area indicators with lighter shades, suggesting better forest coverage. In contrast, countries such as <b>Iceland</b> and <b>Korea</b> display darker shades, indicating lower forest area coverage. This visualization highlights how forest area varies across these selected countries.
                                          </p>
                </div>
            </div>
        </div>
    </div>
 
    <script type="text/javascript">
       
      var specMap = "map.json";
      var specLineChart = "line.json";
      var specScatterPlot = "scatter.json";
      var specBarChart = "bar.json";
      var specMarimekkoChart = "marimekko.json";  
      var specgauge = "gauge.json";
      var specBumpChart = "bump.json";
      var viewMarimekko; 

      var year = 2000; 
      var playing = false; 
      var interval; 

      // Embed the charts
      vegaEmbed('#map', specMap, { "actions": false }).catch(console.error);
      vegaEmbed('#line-chart', specLineChart, { "actions": false }).catch(console.error);
      vegaEmbed('#scatter-plot', specScatterPlot, { "actions": false }).catch(console.error);
      vegaEmbed('#bar-chart', specBarChart, { "actions": false }).catch(console.error);
      vegaEmbed('#gauge-chart', specgauge, { "actions": false }).catch(console.error);
      vegaEmbed('#marimekko-chart', specMarimekkoChart, { "actions": false }).then(function(result) {
        viewMarimekko = result.view;
        viewMarimekko.signal("selectedYear", year).run(); 
      }).catch(console.error);

      // Embed the bump chart in the bottom 
      vegaEmbed('#bump-chart', specBumpChart, { "actions": false }).catch(console.error);

      function playMarimekko() {
        if (playing) {
          clearInterval(interval); 
          playing = false;
        } else {
          interval = setInterval(function() {
            if (year < 2022) {
              year++;
            } else {
              year = 2000; 
            }
            viewMarimekko.signal("selectedYear", year).run();
          }, 1000); 
          playing = true;
        }
      }

      document.getElementById("playButton").addEventListener("click", playMarimekko);
    </script>
</body>
</html>
